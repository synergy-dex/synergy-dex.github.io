(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{81700:function(e,n,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rusd",function(){return l(274)}])},274:function(e,n,l){"use strict";l.r(n),l.d(n,{default:function(){return S}});var r=l(85893),t=l(55581),a=l(13204),o=l(67294),s=l(3365),i=l(39987),d=l(17988),c=l(3718),u=l(77349),m=l(15715),h=l(50053),x=l(3944),j=l(4647),g=l(58918),p=l(22543),Z=l(51061),b=l(1220),C=l(48898);let w=()=>{let e=(0,o.useContext)(a.J),n=e.getRawBalance(),[l,t]=o.useState(n||new b.$d(C.O$.from(0),18)),j=e.getUserInssurances(),g=new Date(new Date().setMonth(new Date().getMonth()+2)),[p,w]=o.useState(g),f=(0,s.Z)(),y=e.stakeRawCallback(l,p,(0,Z.lZ)(f));return(0,r.jsxs)(i.Z,{bordered:!0,shaded:!0,header:"Staking",children:[(0,r.jsxs)("p",{children:["Stake RAW tokens to insure your collateral from debt pool losses. The longer the lock time, the greater the percentage of your insurance can be reimbursed (min 30 days, max 730 days).",(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("span",{style:{color:"orange"},children:"WARNING: Insurance can be returned only after the expiration of the lock."})]}),(0,r.jsx)("hr",{}),(0,r.jsxs)(d.Z.Group,{controlId:"_",children:[(0,r.jsx)(d.Z.ControlLabel,{children:"RAW amount"}),(0,r.jsxs)(c.Z,{style:{marginTop:5,marginBottom:5},children:[(0,r.jsx)(c.Z.Button,{onClick:()=>t(new b.$d(l.amount.sub(C.O$.from(10).pow(l.decimals+1)),l.decimals)),children:"-"}),(0,r.jsx)(u.Z,{className:"no-arrows-input-number",value:l.toHumanString(2),onChange:e=>t(b.$d.fromString("string"==typeof e?e:e.toString(),l.decimals))}),(0,r.jsx)(c.Z.Button,{onClick:()=>t(new b.$d(l.amount.add(C.O$.from(10).pow(l.decimals+1)),l.decimals)),children:"+"})]}),(0,r.jsxs)(d.Z.HelpText,{children:["Balance: ",null==n?void 0:n.toHumanString(4)]})]}),(0,r.jsx)("br",{}),(0,r.jsxs)(d.Z.Group,{controlId:"_",children:[(0,r.jsx)(d.Z.ControlLabel,{children:"Unlock date"}),(0,r.jsx)(m.Z,{style:{marginTop:5,marginBottom:5},format:"yyyy-MM-dd",ranges:[],block:!0,defaultValue:g,onChange:w})]}),(0,r.jsx)("br",{}),(0,r.jsx)(h.Z,{style:{backgroundColor:"#089a81",borderWidth:2},appearance:"primary",color:"green",block:!0,onClick:async()=>y(),children:(0,r.jsx)("b",{children:"Stake"})}),(0,r.jsx)("hr",{}),(0,r.jsxs)(x.Z,{rowHeight:60,autoHeight:!0,style:{borderRadius:10},cellBordered:!0,data:j,renderEmpty:()=>(0,r.jsxs)("span",{style:{alignContent:"center"},children:[(0,r.jsx)("br",{}),"No any insurances"]}),children:[(0,r.jsxs)(x.Z.Column,{verticalAlign:"middle",width:170,align:"left",fixed:!0,flexGrow:1,children:[(0,r.jsx)(x.Z.HeaderCell,{children:"ID"}),(0,r.jsx)(x.Z.Cell,{dataKey:"id"})]}),(0,r.jsxs)(x.Z.Column,{verticalAlign:"middle",width:100,flexGrow:1,children:[(0,r.jsx)(x.Z.HeaderCell,{children:"RAW Locked"}),(0,r.jsx)(x.Z.Cell,{dataKey:"rawLocked"})]}),(0,r.jsxs)(x.Z.Column,{verticalAlign:"middle",width:200,flexGrow:1,children:[(0,r.jsx)(x.Z.HeaderCell,{children:"Locked At"}),(0,r.jsx)(x.Z.Cell,{dataKey:"lockedAt"})]}),(0,r.jsxs)(x.Z.Column,{verticalAlign:"middle",width:150,flexGrow:1,children:[(0,r.jsx)(x.Z.HeaderCell,{children:"Available At"}),(0,r.jsx)(x.Z.Cell,{dataKey:"availableAt"})]}),(0,r.jsxs)(x.Z.Column,{verticalAlign:"middle",width:150,flexGrow:1,children:[(0,r.jsx)(x.Z.HeaderCell,{children:"RAW Repaid"}),(0,r.jsx)(x.Z.Cell,{dataKey:"rawRepaid"})]}),(0,r.jsxs)(x.Z.Column,{verticalAlign:"middle",width:150,flexGrow:1,children:[(0,r.jsx)(x.Z.HeaderCell,{children:"#"}),(0,r.jsx)(x.Z.Cell,{dataKey:"unstakeButton"})]})]})]})},f=()=>{let e=o.useContext(a.J),n=(0,s.Z)(),l=e.getWethAllowance(),t=e.getRusdBalance(),m=e.getWethBalance(),[x,g]=o.useState(m||new b.$d(C.O$.from(0),18)),[p,w]=o.useState(t||new b.$d(C.O$.from(0),18)),f=e.getNewWethAllowanceCallback(x,(0,Z.lZ)(n)),y=e.getMintCallback(p,x,(0,Z.lZ)(n));return(0,r.jsxs)(i.Z,{bordered:!0,shaded:!0,header:"Mint rUSD",children:[(0,r.jsx)("p",{children:"Deposit WTRX as a collateral and get rUSD in return. Resulting collateral ratio should be greater than min collateral ratio"}),(0,r.jsx)("hr",{}),(0,r.jsxs)(d.Z.Group,{controlId:"_",children:[(0,r.jsx)(d.Z.ControlLabel,{children:"rUSD amount"}),(0,r.jsxs)(c.Z,{style:{marginTop:5,marginBottom:5},children:[(0,r.jsx)(c.Z.Button,{onClick:()=>w(new b.$d(p.amount.sub(C.O$.from(10).pow(18)),p.decimals)),children:"-"}),(0,r.jsx)(u.Z,{className:"no-arrows-input-number",step:.1,value:null==p?void 0:p.toHumanString(2),onChange:e=>w(b.$d.fromString("string"==typeof e?e:e.toString(),18))}),(0,r.jsx)(c.Z.Button,{onClick:()=>w(new b.$d(p.amount.add(C.O$.from(10).pow(18)),18)),children:"+"})]}),(0,r.jsxs)(d.Z.HelpText,{children:["Balance: ",null==t?void 0:t.toHumanString(5)]})]}),(0,r.jsx)("br",{}),(0,r.jsxs)(d.Z.Group,{controlId:"_",children:[(0,r.jsx)(d.Z.ControlLabel,{children:"WTRX amount"}),(0,r.jsxs)(c.Z,{style:{marginTop:5,marginBottom:5},children:[(0,r.jsx)(c.Z.Button,{onClick:()=>g(new b.$d(x.amount.sub(C.O$.from(10).pow(x.decimals-1)),x.decimals)),children:"-"}),(0,r.jsx)(u.Z,{className:"no-arrows-input-number",step:.1,value:x.toHumanString(2),onChange:e=>g(b.$d.fromString("string"==typeof e?e:e.toString(),x.decimals))}),(0,r.jsx)(c.Z.Button,{onClick:()=>g(new b.$d(x.amount.add(C.O$.from(10).pow(x.decimals-1)),x.decimals)),children:"+"})]}),(0,r.jsxs)(d.Z.HelpText,{children:["Balance: ",null==m?void 0:m.toHumanString(6)]}),(0,r.jsxs)(d.Z.HelpText,{children:["Allowance: ",null==l?void 0:l.toHumanString(2)]}),(0,r.jsx)("hr",{}),(0,r.jsxs)(d.Z.HelpText,{children:["Current C-ratio: ",e.getCurrentCRatio(),"%"]}),(0,r.jsxs)(d.Z.HelpText,{children:["New C-ratio:"," ",e.predictCollateralRatio(p,x,!0),"%"]}),(0,r.jsxs)(d.Z.HelpText,{children:["Min C-ratio: ",e.getMinCRatio(),"%"]})]}),(0,r.jsx)("br",{}),(0,r.jsxs)(j.Z,{justified:!0,children:[(0,r.jsx)(h.Z,{appearance:"ghost",disabled:parseFloat(null==l?void 0:l.toHumanString(18))>=parseFloat(null==x?void 0:x.toHumanString(18)),style:{marginBottom:7,borderWidth:2},onClick:async()=>f(),children:(0,r.jsx)("b",{children:"Approve"})}),(0,r.jsx)(h.Z,{appearance:"ghost",disabled:parseFloat(null==l?void 0:l.toHumanString(18))<parseFloat(null==x?void 0:x.toHumanString(18)),style:{marginBottom:7,borderWidth:2},async onClick(){console.log(123123),y()},children:(0,r.jsx)("b",{children:"Mint"})})]})]})},y=()=>{let e=o.useContext(a.J),n=e.getRusdBalance(),l=e.getWethBalance();new b.$d(C.O$.from(0),18);let[t,m]=o.useState(n||new b.$d(C.O$.from(0),18)),x=(0,s.Z)(),[j,p]=o.useState(l||new b.$d(C.O$.from(0),18)),[w,f]=o.useState(null),y=e.getUserInssurances(),k=e.getBurnRusdCallback(t,w||"0x0000000000000000000000000000000000000000000000000000000000000000",(0,Z.lZ)(x)),S=e.unlockWethCallback(j,(0,Z.lZ)(x));return(0,r.jsxs)(i.Z,{bordered:!0,shaded:!0,header:"Burn rUSD",children:[(0,r.jsx)("p",{children:"Burn rUSD to increase your collateral ratio and get ability to withdraw collateral in wTRX. You can choose insurance to repay your debt pool losses in RAW."}),(0,r.jsx)("hr",{}),(0,r.jsxs)(d.Z.Group,{controlId:"_",children:[(0,r.jsx)(d.Z.ControlLabel,{children:"Burn rUSD amount"}),(0,r.jsxs)(c.Z,{style:{marginTop:5,marginBottom:5},children:[(0,r.jsx)(c.Z.Button,{onClick:()=>m(new b.$d(t.amount.sub(C.O$.from(10).pow(t.decimals)),t.decimals)),children:"-"}),(0,r.jsx)(u.Z,{className:"no-arrows-input-number",step:.1,value:t.toHumanString(2),onChange:e=>m(b.$d.fromString("string"==typeof e?e:e.toString(),t.decimals))}),(0,r.jsx)(c.Z.Button,{onClick:()=>m(new b.$d(t.amount.add(C.O$.from(10).pow(t.decimals)),t.decimals)),children:"+"})]}),(0,r.jsxs)(d.Z.HelpText,{children:["Current balance: ",null==n?void 0:n.toHumanString(2)]}),(0,r.jsxs)(d.Z.HelpText,{children:["New balance: ",new b.$d((null==n?void 0:n.amount)-(null==t?void 0:t.amount),18).toHumanString(2)]})]}),(0,r.jsx)("br",{}),(0,r.jsxs)(d.Z.Group,{controlId:"_",children:[(0,r.jsx)(d.Z.ControlLabel,{children:"Insurance rUSD amount"}),(0,r.jsx)("div",{style:{marginTop:5,marginBottom:5},children:(0,r.jsx)(g.Z,{label:"Insurance",data:y.map(e=>{var n;return{label:"".concat(e.id.slice(0,6),"... (+").concat(null===(n=e.availableCompensation)||void 0===n?void 0:n.toHumanString(4)," RAW)"),value:e.id}}),onChange:f,block:!0,defaultValue:"0x0000000000000000000000000000000000000000000000000000000000000000"})})]}),(0,r.jsx)("br",{}),(0,r.jsx)(h.Z,{color:"orange",appearance:"ghost",block:!0,style:{marginBottom:7,borderWidth:2},onClick:async()=>k(),children:(0,r.jsx)("b",{children:"Burn rUSD"})}),(0,r.jsx)("hr",{}),(0,r.jsx)("p",{children:"Withdraw wTRX collateral (this decreases collateral ratio)."}),(0,r.jsx)("br",{}),(0,r.jsxs)(d.Z.Group,{controlId:"_",children:[(0,r.jsx)(d.Z.ControlLabel,{children:"Unlock WETH"}),(0,r.jsxs)(c.Z,{style:{marginTop:5,marginBottom:5},children:[(0,r.jsx)(c.Z.Button,{onClick:()=>p(new b.$d(j.amount.sub(C.O$.from(10).pow(j.decimals+1)),j.decimals)),children:"-"}),(0,r.jsx)(u.Z,{className:"no-arrows-input-number",step:.01,value:j.toHumanString(2),onChange:e=>p(b.$d.fromString("string"==typeof e?e:e.toString(),j.decimals))}),(0,r.jsx)(c.Z.Button,{onClick:()=>p(new b.$d(j.amount.add(C.O$.from(10).pow(j.decimals+1)),j.decimals)),children:"+"})]}),(0,r.jsxs)(d.Z.HelpText,{children:["Current balance: ",null==l?void 0:l.toHumanString(5)]})]}),(0,r.jsx)("br",{}),(0,r.jsx)(h.Z,{color:"violet",appearance:"ghost",block:!0,style:{marginBottom:7,borderWidth:2,borderColor:"#b6a1e3",color:"#b6a1e3"},onClick:async()=>S(),children:(0,r.jsx)("b",{children:"Withdraw WTRX"})})]})},k=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p.Z,{justify:"space-around",children:(0,r.jsx)(p.Z.Item,{colspan:23,children:(0,r.jsx)(w,{})})}),(0,r.jsx)("br",{}),(0,r.jsxs)(p.Z,{justify:"space-around",children:[(0,r.jsx)(p.Z.Item,{colspan:11,children:(0,r.jsx)(f,{})}),(0,r.jsx)(p.Z.Item,{colspan:11,children:(0,r.jsx)(y,{})})]})]});function S(){return(0,r.jsx)(t.Z,{active:"rusd",children:(0,r.jsx)("div",{style:{padding:20},children:(0,r.jsx)(k,{})})})}}},function(e){e.O(0,[814,339,799,53,774,888,179],function(){return e(e.s=81700)}),_N_E=e.O()}]);